function ignore(){}function id(n){return n}function fst(n){return n[0]}function snd(n){return n[1]}function trd(n){return n[2]}IntelliFactory={Runtime:{Ctor:function(n,t){return n.prototype=t.prototype,n},Class:function(n,t,i){var u=n,f,r,e;if(t){u=new t;for(f in n)u[f]=n[f]}if(r=function(n){if(n)for(var t in n)this[t]=n[t]},r.prototype=u,i)for(e in i)r[e]=i[e];return r},Clone:function(n){var t={};for(var i in n)t[i]=n[i];return t},NewObject:function(n){for(var i={},t=0;t<n.length;t++)i[n[t][0]]=n[t][1];return i},DeleteEmptyFields:function(n,t){for(var r,i=0;i<t.length;i++)r=t[i],n[r]===void 0&&delete n[r];return n},GetOptional:function(n){return n===void 0?null:{$:1,$0:n}},SetOptional:function(n,t,i){i?n[t]=i.$0:delete n[t]},SetOrDelete:function(n,t,i){i===void 0?delete n[t]:n[t]=i},Apply:function(n,t,i){return n.apply(t,i)},Bind:function(n){return function(){return n.apply(this,arguments)}},CreateFuncWithArgs:function(n){return function(){return n(Array.prototype.slice.call(arguments))}},CreateFuncWithOnlyThis:function(n){return function(){return n(this)}},CreateFuncWithThis:function(n){return function(){return n(this).apply(null,arguments)}},CreateFuncWithThisArgs:function(n){return function(){return n(this)(Array.prototype.slice.call(arguments))}},CreateFuncWithRest:function(n,t){return function(){return t(Array.prototype.slice.call(arguments,0,n).concat([Array.prototype.slice.call(arguments,n)]))}},CreateFuncWithArgsRest:function(n,t){return function(){return t([Array.prototype.slice.call(arguments,0,n),Array.prototype.slice.call(arguments,n)])}},BindDelegate:function(n,t){var i=n.bind(t);return i.$Func=n,i.$Target=t,i},CreateDelegate:function(n){if(n.length==0)return null;if(n.length==1)return n[0];var t=function(){for(var i,t=0;t<n.length;t++)i=n[t].apply(null,arguments);return i};return t.$Invokes=n,t},CombineDelegates:function(n){for(var t,i=[],r=0;r<n.length;r++)t=n[r],t&&("$Invokes"in t?i=i.concat(t.$Invokes):i.push(t));return IntelliFactory.Runtime.CreateDelegate(i)},DelegateEqual:function(n,t){var f,e,i,r,u;if(n===t)return!0;if(n==null||t==null||(f=n.$Invokes||[n],e=t.$Invokes||[t],f.length!=e.length))return!1;for(i=0;i<f.length;i++)if(r=f[i],u=e[i],!(r===u||"$Func"in r&&"$Func"in u&&r.$Func===u.$Func&&r.$Target==u.$Target))return!1;return!0},ThisFunc:function(n){return function(){var t=Array.prototype.slice.call(arguments);return t.unshift(this),n.apply(null,t)}},ThisFuncOut:function(n){return function(){var t=Array.prototype.slice.call(arguments);return n.apply(t.shift(),t)}},ParamsFunc:function(n,t){return function(){var i=Array.prototype.slice.call(arguments);return t.apply(null,i.slice(0,n).concat([i.slice(n)]))}},ParamsFuncOut:function(n,t){return function(){var i=Array.prototype.slice.call(arguments);return t.apply(null,i.slice(0,n).concat(i[n]))}},ThisParamsFunc:function(n,t){return function(){var i=Array.prototype.slice.call(arguments);return i.unshift(this),t.apply(null,i.slice(0,n+1).concat([i.slice(n+1)]))}},ThisParamsFuncOut:function(n,t){return function(){var i=Array.prototype.slice.call(arguments);return t.apply(i.shift(),i.slice(0,n).concat(i[n]))}},Curried:function(n,t,i){return i=i||[],function(r){var u=i.concat([r===void 0?null:r]);return t==1?n.apply(null,u):t==2?function(t){return n.apply(null,u.concat([t===void 0?null:t]))}:IntelliFactory.Runtime.Curried(n,t-1,u)}},Curried2:function(n){return function(t){return function(i){return n(t,i)}}},Curried3:function(n){return function(t){return function(i){return function(r){return n(t,i,r)}}}},UnionByType:function(n,t,i){for(var u,f=typeof t,r=0;r<n.length;r++)if(u=n[r],typeof u=="number"){if(Array.isArray(t)&&(u==0||t.length==u))return{$:r,$0:t}}else if(u==f)return{$:r,$0:t};if(!i)throw new Error("Type not expected for creating Choice value.");},ScriptBasePath:"./",ScriptPath:function(n,t){return this.ScriptBasePath+(this.ScriptSkipAssemblyDir?"":n+"/")+t},OnLoad:function(n){"load"in this||(this.load=[]);this.load.push(n)},Start:function(){function n(n){for(var t=0;t<n.length;t++)n[t]()}"load"in this&&(n(this.load),this.load=[])}}};IntelliFactory.Runtime.OnLoad(function(){self.WebSharper&&WebSharper.Activator&&WebSharper.Activator.Activate&&WebSharper.Activator.Activate()});Date.now||(Date.now=function(){return(new Date).getTime()});Math.trunc||(Math.trunc=function(n){return n<0?Math.ceil(n):Math.floor(n)});Object.setPrototypeOf||(Object.setPrototypeOf=function(n,t){return n.__proto__=t,n});console||(console={count:ignore,dir:ignore,error:ignore,group:ignore,groupEnd:ignore,info:ignore,log:ignore,profile:ignore,profileEnd:ignore,time:ignore,timeEnd:ignore,trace:ignore,warn:ignore});
// Peity jQuery plugin version 3.2.0
// (c) 2015 Ben Pickles
//
// http://benpickles.github.io/peity
//
// Released under MIT license.
(function(k,w,h,v){var d=k.fn.peity=function(a,b){y&&this.each(function(){var e=k(this),c=e.data("_peity");c?(a&&(c.type=a),k.extend(c.opts,b)):(c=new x(e,a,k.extend({},d.defaults[a],e.data("peity"),b)),e.change(function(){c.draw()}).data("_peity",c));c.draw()});return this},x=function(a,b,e){this.$el=a;this.type=b;this.opts=e},o=x.prototype,q=o.svgElement=function(a,b){return k(w.createElementNS("http://www.w3.org/2000/svg",a)).attr(b)},y="createElementNS"in w&&q("svg",{})[0].createSVGRect;o.draw=
function(){var a=this.opts;d.graphers[this.type].call(this,a);a.after&&a.after.call(this,a)};o.fill=function(){var a=this.opts.fill;return k.isFunction(a)?a:function(b,e){return a[e%a.length]}};o.prepare=function(a,b){this.$svg||this.$el.hide().after(this.$svg=q("svg",{"class":"peity"}));return this.$svg.empty().data("peity",this).attr({height:b,width:a})};o.values=function(){return k.map(this.$el.text().split(this.opts.delimiter),function(a){return parseFloat(a)})};d.defaults={};d.graphers={};d.register=
function(a,b,e){this.defaults[a]=b;this.graphers[a]=e};d.register("pie",{fill:["#ff9900","#fff4dd","#ffc66e"],radius:8},function(a){if(!a.delimiter){var b=this.$el.text().match(/[^0-9\.]/);a.delimiter=b?b[0]:","}b=k.map(this.values(),function(a){return 0<a?a:0});if("/"==a.delimiter)var e=b[0],b=[e,h.max(0,b[1]-e)];for(var c=0,e=b.length,t=0;c<e;c++)t+=b[c];t||(e=2,t=1,b=[0,1]);var l=2*a.radius,l=this.prepare(a.width||l,a.height||l),c=l.width(),f=l.height(),j=c/2,d=f/2,f=h.min(j,d),a=a.innerRadius;
"donut"==this.type&&!a&&(a=0.5*f);for(var r=h.PI,s=this.fill(),g=this.scale=function(a,b){var c=a/t*r*2-r/2;return[b*h.cos(c)+j,b*h.sin(c)+d]},m=0,c=0;c<e;c++){var u=b[c],i=u/t;if(0!=i){if(1==i)if(a)var i=j-0.01,p=d-f,n=d-a,i=q("path",{d:["M",j,p,"A",f,f,0,1,1,i,p,"L",i,n,"A",a,a,0,1,0,j,n].join(" ")});else i=q("circle",{cx:j,cy:d,r:f});else p=m+u,n=["M"].concat(g(m,f),"A",f,f,0,0.5<i?1:0,1,g(p,f),"L"),a?n=n.concat(g(p,a),"A",a,a,0,0.5<i?1:0,0,g(m,a)):n.push(j,d),m+=u,i=q("path",{d:n.join(" ")});
i.attr("fill",s.call(this,u,c,b));l.append(i)}}});d.register("donut",k.extend(!0,{},d.defaults.pie),function(a){d.graphers.pie.call(this,a)});d.register("line",{delimiter:",",fill:"#c6d9fd",height:16,min:0,stroke:"#4d89f9",strokeWidth:1,width:32},function(a){var b=this.values();1==b.length&&b.push(b[0]);for(var e=h.max.apply(h,a.max==v?b:b.concat(a.max)),c=h.min.apply(h,a.min==v?b:b.concat(a.min)),d=this.prepare(a.width,a.height),l=a.strokeWidth,f=d.width(),j=d.height()-l,k=e-c,e=this.x=function(a){return a*
(f/(b.length-1))},r=this.y=function(a){var b=j;k&&(b-=(a-c)/k*j);return b+l/2},s=r(h.max(c,0)),g=[0,s],m=0;m<b.length;m++)g.push(e(m),r(b[m]));g.push(f,s);a.fill&&d.append(q("polygon",{fill:a.fill,points:g.join(" ")}));l&&d.append(q("polyline",{fill:"none",points:g.slice(2,g.length-2).join(" "),stroke:a.stroke,"stroke-width":l,"stroke-linecap":"square"}))});d.register("bar",{delimiter:",",fill:["#4D89F9"],height:16,min:0,padding:0.1,width:32},function(a){for(var b=this.values(),e=h.max.apply(h,a.max==
v?b:b.concat(a.max)),c=h.min.apply(h,a.min==v?b:b.concat(a.min)),d=this.prepare(a.width,a.height),l=d.width(),f=d.height(),j=e-c,a=a.padding,k=this.fill(),r=this.x=function(a){return a*l/b.length},s=this.y=function(a){return f-(j?(a-c)/j*f:1)},g=0;g<b.length;g++){var m=r(g+a),u=r(g+1-a)-m,i=b[g],p=s(i),n=p,o;j?0>i?n=s(h.min(e,0)):p=s(h.max(c,0)):o=1;o=p-n;0==o&&(o=1,0<e&&j&&n--);d.append(q("rect",{fill:k.call(this,i,g,b),x:m,y:n,width:u,height:o}))}})})(jQuery,document,Math);
;
(function(){for(var i=0,t=["webkit","moz"],n=0;n<t.length&&!window.requestAnimationFrame;++n)window.requestAnimationFrame=window[t[n]+"RequestAnimationFrame"],window.cancelAnimationFrame=window[t[n]+"CancelAnimationFrame"]||window[t[n]+"CancelRequestAnimationFrame"];window.requestAnimationFrame||(window.requestAnimationFrame=function(n){var t=(new Date).getTime(),r=Math.max(0,16-(t-i)),u=window.setTimeout(function(){n(t+r)},r);return i=t+r,u});window.cancelAnimationFrame||(window.cancelAnimationFrame=function(n){clearTimeout(n)})})();
(function(){"use strict";var a,b,c,d,e,f,g,h,i,j,k,l,m,n,o,p,q,r,s,t,u,v,w,x,y,z,A,B,C,D,E,F,G,H,I,J,K,L,M,N,O,P,Q,R,S,T,U,V,W,X,Y,Z,_0,_1,_2,_3,_4,_5,_6,_7,_8,_9,_,$,ba,bb,bc,bd,be,bf,bg,bh,bi,bj,bk,bl,bm,bn,bo,bp,bq,br,bs,bt,bu,bv,bw,bx,by,bz,bA,bB,bC,bD,bE;a=self;b=a.PeityCharts=a.PeityCharts||{};c=b.Client=b.Client||{};d=a.StartupCode$Peity$Client=a.StartupCode$Peity$Client||{};e=a.WebSharper=a.WebSharper||{};f=e.Obj=e.Obj||{};g=e.Peity=e.Peity||{};h=g.UpdatingChart=g.UpdatingChart||{};i=e.List=e.List||{};j=i.T=i.T||{};k=e.Operators=e.Operators||{};l=e.UI=e.UI||{};m=l.ListModel=l.ListModel||{};n=g.Seq=g.Seq||{};o=g.Option=g.Option||{};p=e.Seq=e.Seq||{};q=e.Strings=e.Strings||{};r=l.Client=l.Client||{};s=r.Templates=r.Templates||{};t=l.Doc=l.Doc||{};u=e.JavaScript=e.JavaScript||{};v=u.Pervasives=u.Pervasives||{};w=l.Storage=l.Storage||{};x=l.Var=l.Var||{};y=l.AttrProxy=l.AttrProxy||{};z=e.Enumerator=e.Enumerator||{};A=z.T=z.T||{};B=e.Concurrency=e.Concurrency||{};C=a.EventTarget;D=a.Node;E=u.JS=u.JS||{};F=e.Collections=e.Collections||{};G=F.Dictionary=F.Dictionary||{};H=l.DomUtility=l.DomUtility||{};I=e.Unchecked=e.Unchecked||{};J=l.View=l.View||{};K=l.Snap=l.Snap||{};L=w.ArrayStorage=w.ArrayStorage||{};M=e.Arrays=e.Arrays||{};N=B.AsyncBody=B.AsyncBody||{};O=a.StartupCode$WebSharper_Main$Concurrency=a.StartupCode$WebSharper_Main$Concurrency||{};P=B.CT=B.CT||{};Q=a.StartupCode$WebSharper_UI$Templates=a.StartupCode$WebSharper_UI$Templates||{};R=F.HashSet=F.HashSet||{};S=a.WindowOrWorkerGlobalScope;T=a.StartupCode$WebSharper_UI$DomUtility=a.StartupCode$WebSharper_UI$DomUtility||{};U=l.Docs=l.Docs||{};V=l.Elt=l.Elt||{};W=l.Array=l.Array||{};X=a.Object;Y=l.DocElemNode=l.DocElemNode||{};Z=a.CharacterData;_0=l.Var$1=l.Var$1||{};_1=B.Scheduler=B.Scheduler||{};_2=a.Error;_3=e.OperationCanceledException=e.OperationCanceledException||{};_4=e.CancellationTokenSource=e.CancellationTokenSource||{};_5=F.DictionaryUtil=F.DictionaryUtil||{};_6=s.Prepare=s.Prepare||{};_7=e.Slice=e.Slice||{};_8=F.KeyCollection=F.KeyCollection||{};_9=l.An=l.An||{};_=r.Settings=r.Settings||{};$=l.Abbrev=l.Abbrev||{};ba=$.Mailbox=$.Mailbox||{};bb=l.Updates=l.Updates||{};bc=l.Attrs=l.Attrs||{};bd=r.Attrs=r.Attrs||{};be=bd.Dyn=bd.Dyn||{};bf=l.ConcreteVar=l.ConcreteVar||{};bg=r.Docs=r.Docs||{};bh=bg.RunState=bg.RunState||{};bi=bg.NodeSet=bg.NodeSet||{};bj=l.Anims=l.Anims||{};bk=a.StartupCode$WebSharper_UI$Doc_Proxy=a.StartupCode$WebSharper_UI$Doc_Proxy||{};bl=$.Fresh=$.Fresh||{};bm=a.StartupCode$WebSharper_UI$Attr_Client=a.StartupCode$WebSharper_UI$Attr_Client||{};bn=a.StartupCode$WebSharper_UI$Animation=a.StartupCode$WebSharper_UI$Animation||{};bo=l.AppendList=l.AppendList||{};bp=F.HashSetUtil=F.HashSetUtil||{};bq=l.Easing=l.Easing||{};br=$.HashSet=$.HashSet||{};bs=a.StartupCode$WebSharper_UI$Abbrev=a.StartupCode$WebSharper_UI$Abbrev||{};bt=e.Queue=e.Queue||{};bu=bg.DomNodes=bg.DomNodes||{};bv=e.Lazy=e.Lazy||{};bw=a.StartupCode$WebSharper_UI$AppendList=a.StartupCode$WebSharper_UI$AppendList||{};bx=e.LazyExtensionsProxy=e.LazyExtensionsProxy||{};by=bx.LazyRecord=bx.LazyRecord||{};bz=a.Math;bA=a.IntelliFactory;bB=bA&&bA.Runtime;bC=a.console;bD=a.jQuery;bE=a.Date;c.main=function(){d.$cctor();return d.main;};c.updateWithRandomNumbers=function(bF){var bG;B.Start((bG=null,B.Delay(function(){return B.Bind(B.Sleep(1000),function(){bF.AddValue(bz.random());c.updateWithRandomNumbers(bF);return B.Zero();});})),null);};c.chart2=function(){d.$cctor();return d.chart2;};c.chart1=function(){d.$cctor();return d.chart1;};d.$cctor=function(){var bF,bG,bH;d.$cctor=a.ignore;d.chart1=new h.New(j.Empty,null,{$:1,$0:(bF={},bF.width=200,bF.height=150,bF)});d.chart2=new h.New(j.Empty,{$:1,$0:10},{$:1,$0:(bG={},bG.width=200,bG.height=150,bG.fill=["rgba(255,0,0,0.5)"],bG.stroke=["red"],bG)});d.main=(bH=t.Element("div",[],[t.Element("span",[],[c.chart1().get_Doc()]),t.Element("span",[],[c.chart2().get_Doc()]),t.Element("div",[],[t.Button("Add random",[],function(){var bI;bI=bz.random();c.chart1().AddValue(bI);})]),t.Element("div",[],[t.TextNode("Press the button to add a random value to the chart on the left.")])]),(c.updateWithRandomNumbers(c.chart2()),s.LoadLocalTemplates(""),t.RunById("main",bH)));};f=e.Obj=bB.Class({Equals:function(bF){return this===bF;},GetHashCode:function(){return -1;}},null,f);f.New=bB.Ctor(function(){},f);h=g.UpdatingChart=bB.Class({get_Doc:function(){return this.Doc;},AddValue:function(bF){var bG;this.data.Append([this.i[0],bF]);this.i[0]++;bG=this.windowSize;bG==null?void 0:this.data.get_Length()>bG.$0?(this.data.RemoveByKey(this.j[0]),this.j[0]++):void 0;}},f,h);h.New=bB.Ctor(function(bF,bG,bH){f.New.call(this);this.windowSize=bG;this.data=m.Create(function(bI){return bI[0];},n.indexed(bF));this.i=[this.data.get_Length()];this.j=[0];this.Doc=t.BindView(function(bI){return t.Element("span",[y.OnAfterRenderImpl(function(bJ){a.jQuery(bJ).peity("line",o.toObj(bH));})],i.ofSeq(p.delay(function(){return[t.TextNode(q.concat(bH==null?",":bH.$0.delimiter,p.map(function(bJ){return a.String(bJ[1]);},bI)))];})));},this.data.v);},h);j=i.T=bB.Class({GetEnumerator:function(){return new A.New(this,null,function(bF){var bG;bG=bF.s;return bG.$==0?false:(bF.c=bG.$0,bF.s=bG.$1,true);},void 0);},GetEnumerator0:function(){return z.Get(this);}},null,j);j.Empty=new j({$:0});k.FailWith=function(bF){throw new _2(bF);};k.KeyValue=function(bF){return[bF.K,bF.V];};m.Create=function(bF,bG){return m.CreateWithStorage(bF,w.InMemory(M.ofSeq(bG)));};m.CreateWithStorage=function(bF,bG){return new m.New(bF,bG);};n.indexed=function(bF){return p.mapi(function(bG,bH){return[bG,bH];},bF);};m=l.ListModel=bB.Class({get_Length:function(){return M.length(this["var"].Get());},RemoveByKey:function(bF){var bG;bG=this;this["var"].Set(this.storage.SRemoveIf(function(bH){return I.Equals(bG.key(bH),bF);},this["var"].Get()));this.ObsoleteKey(bF);},Append:function(bF){var bG,bH,bI,bJ;bG=this;bH=this["var"].Get();bI=this.key(bF);bJ=M.tryFindIndex(function(bK){return I.Equals(bG.key(bK),bI);},bH);bJ!=null&&bJ.$==1?this["var"].Set(this.storage.SSetAt(bJ.$0,bF,bH)):this["var"].Set(this.storage.SAppend(bF,bH));this.ObsoleteKey(bI);},ObsoleteKey:function(bF){var bG,bH;bG=(bH=null,[this.it.TryGetValue(bF,{get:function(){return bH;},set:function(bI){bH=bI;}}),bH]);bG[0]?(K.Obsolete(bG[1]),this.it.Remove(bF)):void 0;},GetEnumerator:function(){return z.Get(this["var"].Get());},GetEnumerator0:function(){return z.Get0(this["var"].Get());}},f,m);m.New=bB.Ctor(function(bF,bG){m.New$3.call(this,bF,_0.Create$1(M.ofSeq(p.distinctBy(bF,bG.SInit()))),bG);},m);m.New$3=bB.Ctor(function(bF,bG,bH){f.New.call(this);this.key=bF;this["var"]=bG;this.storage=bH;this.v=J.Map(function(bI){return bI.slice();},this["var"].get_View());this.it=new G.New$5();},m);o.toObj=function(bF){return bF!=null&&bF.$==1?bF.$0:null;};p.delay=function(bF){return{GetEnumerator:function(){return z.Get(bF());}};};p.map=function(bF,bG){return{GetEnumerator:function(){var bH;bH=z.Get(bG);return new A.New(null,null,function(bI){return bH.MoveNext()&&(bI.c=bF(bH.Current()),true);},function(){bH.Dispose();});}};};p.mapi=function(bF,bG){return p.map2(bF,p.initInfinite(a.id),bG);};p.map2=function(bF,bG,bH){return{GetEnumerator:function(){var bI,bJ;bI=z.Get(bG);bJ=z.Get(bH);return new A.New(null,null,function(bK){return bI.MoveNext()&&bJ.MoveNext()&&(bK.c=bF(bI.Current(),bJ.Current()),true);},function(){bI.Dispose();bJ.Dispose();});}};};p.initInfinite=function(bF){return{GetEnumerator:function(){return new A.New(0,null,function(bG){bG.c=bF(bG.s);bG.s=bG.s+1;return true;},void 0);}};};p.head=function(bF){var bG;bG=z.Get(bF);try{return bG.MoveNext()?bG.Current():p.insufficient();}finally{if(typeof bG=="object"&&"Dispose"in bG)bG.Dispose();}};p.distinctBy=function(bF,bG){return{GetEnumerator:function(){var bH,bI;bH=z.Get(bG);bI=new R.New$3();return new A.New(null,null,function(bJ){var bK,bL;if(bH.MoveNext()){bK=bH.Current();bL=bI.Add(bF(bK));while(!bL&&bH.MoveNext()){bK=bH.Current();bL=bI.Add(bF(bK));}return bL&&(bJ.c=bK,true);}else return false;},function(){bH.Dispose();});}};};p.fold=function(bF,bG,bH){var bI,bJ;bI=bG;bJ=z.Get(bH);try{while(bJ.MoveNext())bI=bF(bI,bJ.Current());return bI;}finally{if(typeof bJ=="object"&&"Dispose"in bJ)bJ.Dispose();}};p.iter=function(bF,bG){var bH;bH=z.Get(bG);try{while(bH.MoveNext())bF(bH.Current());}finally{if(typeof bH=="object"&&"Dispose"in bH)bH.Dispose();}};p.max=function(bF){var bG,bH,bI;bG=z.Get(bF);try{if(!bG.MoveNext())p.seqEmpty();bH=bG.Current();while(bG.MoveNext()){bI=bG.Current();I.Compare(bI,bH)===1?bH=bI:void 0;}return bH;}finally{if(typeof bG=="object"&&"Dispose"in bG)bG.Dispose();}};p.seqEmpty=function(){return k.FailWith("The input sequence was empty.");};q.concat=function(bF,bG){return M.ofSeq(bG).join(bF);};q.SplitChars=function(bF,bG,bH){return q.Split(bF,new a.RegExp("["+q.RegexEscape(bG.join(""))+"]"),bH);};q.StartsWith=function(bF,bG){return bF.substring(0,bG.length)==bG;};q.Split=function(bF,bG,bH){return bH===1?M.filter(function(bI){return bI!=="";},q.SplitWith(bF,bG)):q.SplitWith(bF,bG);};q.RegexEscape=function(bF){return bF.replace(new a.RegExp("[-\\/\\\\^$*+?.()|[\\]{}]","g"),"\\$&");};q.SplitWith=function(bF,bG){return bF.split(bG);};s.LoadLocalTemplates=function(bF){!s.LocalTemplatesLoaded()?(s.set_LocalTemplatesLoaded(true),s.LoadNestedTemplates(self.document.body,"")):void 0;s.LoadedTemplates().set_Item(bF,s.LoadedTemplateFile(""));};s.LocalTemplatesLoaded=function(){Q.$cctor();return Q.LocalTemplatesLoaded;};s.set_LocalTemplatesLoaded=function(bF){Q.$cctor();Q.LocalTemplatesLoaded=bF;};s.LoadNestedTemplates=function(bF,bG){var bI,bJ,bK,bL,bM,bN,bO,bP,bQ,bR,bS,bT,bU,bV;function bH(bW){var bX,bY;if(!bI.ContainsKey(bW)){bX=(bY=null,[bJ.TryGetValue(bW,{get:function(){return bY;},set:function(bZ){bY=bZ;}}),bY]);bX[0]?(bV.Add(bW),bJ.Remove(bW),s.PrepareTemplateStrict(bG,{$:1,$0:bW},bX[1][0],{$:1,$0:bX[1][1]},{$:1,$0:bH})):bC.warn(bV.Contains(bW)?"Encountered loop when instantiating "+bW:"Local template does not exist: "+bW);}}bI=s.LoadedTemplateFile(bG);bJ=new G.New$5();bK=bF.querySelectorAll("[ws-template]");for(bL=0,bM=bK.length-1;bL<=bM;bL++){bN=bK[bL];bO=bN.getAttribute("ws-template").toLowerCase();bN.removeAttribute("ws-template");bJ.set_Item(bO,[[bN],s.FakeRootSingle(bN)]);}bP=bF.querySelectorAll("[ws-children-template]");for(bQ=0,bR=bP.length-1;bQ<=bR;bQ++){bS=bP[bQ];bT=bS.getAttribute("ws-children-template").toLowerCase();bS.removeAttribute("ws-children-template");bJ.set_Item(bT,(bU=H.ChildrenArray(bS),[bU,s.FakeRoot(bU)]));}bV=new R.New$3();while(bJ.count>0)bH(p.head(bJ.get_Keys()));};s.LoadedTemplates=function(){Q.$cctor();return Q.LoadedTemplates;};s.LoadedTemplateFile=function(bF){var bG,bH,bI;bG=(bH=null,[s.LoadedTemplates().TryGetValue(bF,{get:function(){return bH;},set:function(bJ){bH=bJ;}}),bH]);return bG[0]?bG[1]:(bI=new G.New$5(),(s.LoadedTemplates().set_Item(bF,bI),bI));};s.FakeRootSingle=function(bF){var bG,bH,bI;bF.removeAttribute("ws-template");bG=bF.getAttribute("ws-replace");bG===null?void 0:(bF.removeAttribute("ws-replace"),bH=bF.parentNode,I.Equals(bH,null)?void 0:(bI=self.document.createElement(bF.tagName),bI.setAttribute("ws-replace",bG),bH.replaceChild(bI,bF)));return s.FakeRoot([bF]);};s.FakeRoot=function(bF){var bG,bH,bI;bG=self.document.createElement("div");for(bH=0,bI=bF.length-1;bH<=bI;bH++)bG.appendChild(M.get(bF,bH));return bG;};s.PrepareTemplateStrict=function(bF,bG,bH,bI,bJ){var bK,bL;function bM(bR,bS){var bT,bU,bV,bW,bX,bZ,b0,b1,b2,b3,b4,b5,b6,b7,b8,b9,b_,b$,ca,cb,cc,cd,ce,cf,cg,ch;function bY(ci){}while(true)switch(bR){case 0:if(bS!==null){bT=bS.nextSibling;if(I.Equals(bS.nodeType,D.TEXT_NODE))_6.convertTextNode(bS);else if(I.Equals(bS.nodeType,D.ELEMENT_NODE))bO(bS);bS=bT;}else return null;break;case 1:bZ=_7.string(bS.nodeName,{$:1,$0:3},null).toLowerCase();b0=(bU=bZ.indexOf("."),bU===-1?[bF,bZ]:[_7.string(bZ,null,{$:1,$0:bU-1}),_7.string(bZ,{$:1,$0:bU+1},null)]);b1=b0[1];b2=b0[0];if(b2!==""&&!s.LoadedTemplates().ContainsKey(b2))return _6.failNotLoaded(b1);else{if(b2===""&&bJ!=null)bJ.$0(b1);b3=s.LoadedTemplates().get_Item(b2);if(!b3.ContainsKey(b1))return _6.failNotLoaded(b1);else{b4=b3.get_Item(b1);b5=b4.cloneNode(true);b6=new R.New$3();b7=new G.New$5();b8=bS.attributes;for(b9=0,b_=b8.length-1;b9<=b_;b9++){b$=b8.item(b9).name.toLowerCase();b7.set_Item(b$,(ca=b8.item(b9).nodeValue,ca===""?b$:ca.toLowerCase()));!b6.Add(b$)?bC.warn("Hole mapped twice",b$):void 0;}for(cb=0,cc=bS.childNodes.length-1;cb<=cc;cb++){cd=bS.childNodes[cb];I.Equals(cd.nodeType,D.ELEMENT_NODE)?!b6.Add(cd.nodeName.toLowerCase())?bC.warn("Hole filled twice",b1):void 0:void 0;}ce=bS.childNodes.length===1&&I.Equals(bS.firstChild.nodeType,D.TEXT_NODE);if(ce){bW=_6.fillTextHole(b5,bS.firstChild.textContent,b1);((function(ci){return function(cj){if(cj!=null)ci(cj.$0);};}((bX=function(ci){return function(cj){return ci.Add(cj);};}(b6),function(ci){return bY(bX(ci));})))(bW));}_6.removeHolesExcept(b5,b6);if(!ce){for(cf=0,cg=bS.childNodes.length-1;cf<=cg;cf++){ch=bS.childNodes[cf];I.Equals(ch.nodeType,D.ELEMENT_NODE)?ch.hasAttributes()?_6.fillInstanceAttrs(b5,ch):bN(b5,ch):void 0;}}_6.mapHoles(b5,b7);_6.fill(b5,bS.parentNode,bS);bS.parentNode.removeChild(bS);return;}}break;}}function bN(bR,bS){var bT,bV,bW;function bU(bX,bY){var bZ,b0,b1;if(bV==="title"&&bS.hasChildNodes()){bZ=bD.parseHTML(bS.textContent);bS.removeChild(bS.firstChild);for(b0=0,b1=bZ.length-1;b0<=b1;b0++)bS.appendChild(M.get(bZ,b0));}else null;bO(bS);return _6.fill(bS,bX,bY);}bV=bS.nodeName.toLowerCase();H.IterSelector(bR,"[ws-attr-holes]",function(bX){var bY,bZ,b0,b1,b2;bY=q.SplitChars(bX.getAttribute("ws-attr-holes"),[" "],1);for(bZ=0,b0=bY.length-1;bZ<=b0;bZ++){b1=M.get(bY,bZ);bX.setAttribute(b1,(b2=new a.RegExp("\\${"+bV+"}","ig"),bX.getAttribute(b1).replace(b2,bS.textContent)));}});bW=bR.querySelector("[ws-hole="+bV+"]");if(I.Equals(bW,null)){bT=bR.querySelector("[ws-replace="+bV+"]");return I.Equals(bT,null)?null:(bU(bT.parentNode,bT),void bT.parentNode.removeChild(bT));}else{while(bW.hasChildNodes())bW.removeChild(bW.lastChild);bW.removeAttribute("ws-hole");return bU(bW,null);}}function bO(bR){if(q.StartsWith(bR.nodeName.toLowerCase(),"ws-"))bQ(bR);else{_6.convertAttrs(bR);bP(bR.firstChild);}}function bP(bR){return bM(0,bR);}function bQ(bR){return bM(1,bR);}bK=bI==null?s.FakeRoot(bH):bI.$0;bL=(bG==null?"":bG.$0).toLowerCase();s.LoadedTemplateFile(bF).set_Item(bL,bK);M.length(bH)>0?(function(bR){var bS,bT,bU,bV;while(true){bS=bR.querySelector("[ws-template]");if(I.Equals(bS,null)){bT=bR.querySelector("[ws-children-template]");if(I.Equals(bT,null))return null;else{bU=bT.getAttribute("ws-children-template");bT.removeAttribute("ws-children-template");s.PrepareTemplateStrict(bF,{$:1,$0:bU},H.ChildrenArray(bT),null,null);bR=bR;}}else{bV=bS.getAttribute("ws-template");(s.PrepareSingleTemplate(bF,{$:1,$0:bV},bS))(null);bR=bR;}}}(bK),bP(M.get(bH,0))):void 0;};s.PrepareSingleTemplate=function(bF,bG,bH){var bI,bJ,bK;bI=s.FakeRootSingle(bH);bJ=[bH];bK={$:1,$0:bI};return function(bL){s.PrepareTemplateStrict(bF,bG,bJ,bK,bL);};};s.TextHoleRE=function(){Q.$cctor();return Q.TextHoleRE;};t=l.Doc=bB.Class({},f,t);t.RunById=function(bF,bG){var bH;bH=H.Doc().getElementById(bF);I.Equals(bH,null)?k.FailWith("invalid id: "+bF):t.Run(bH,bG);};t.Button=function(bF,bG,bH){var bI;bI=y.Concat(bG);return V.New(t.Clickable("button",bH),bI,t.TextNode(bF));};t.TextNode=function(bF){return t.Mk({$:5,$0:H.CreateText(bF)},J.Const());};t.BindView=function(bF,bG){return t.EmbedView(J.Map(bF,bG));};t.Run=function(bF,bG){U.LinkElement(bF,bG.docNode);t.RunInPlace(false,bF,bG);};t.Element=function(bF,bG,bH){var bI,bJ;bI=y.Concat(bG);bJ=t.Concat(bH);return V.New(H.CreateElement(bF),bI,bJ);};t.Clickable=function(bF,bG){var bH;bH=H.CreateElement(bF);bH.addEventListener("click",function(bI){bI.preventDefault();return bG();},false);return bH;};t.Mk=function(bF,bG){return new t.New(bF,bG);};t.EmbedView=function(bF){var bG;bG=U.CreateEmbedNode();return t.Mk({$:2,$0:bG},J.Map(a.ignore,J.Bind(function(bH){U.UpdateEmbedNode(bG,bH.docNode);return bH.updates;},bF)));};t.RunInPlace=function(bF,bG,bH){var bI;bI=U.CreateRunState(bG,bH.docNode);J.Sink(_9.get_UseAnimations()||_.BatchUpdatesEnabled()?ba.StartProcessor(U.PerformAnimatedUpdate(bF,bI,bH.docNode)):function(){U.PerformSyncUpdate(bF,bI,bH.docNode);},bH.updates);};t.Concat=function(bF){var bG;bG=W.ofSeqNonCopying(bF);return W.TreeReduce(t.get_Empty(),t.Append,bG);};t.Append=function(bF,bG){return t.Mk({$:0,$0:bF.docNode,$1:bG.docNode},J.Map2Unit(bF.updates,bG.updates));};t.get_Empty=function(){return t.Mk(null,J.Const());};t.New=bB.Ctor(function(bF,bG){f.New.call(this);this.docNode=bF;this.updates=bG;},t);v.NewFromSeq=function(bF){var bG,bH,bI;bG={};bH=z.Get(bF);try{while(bH.MoveNext()){bI=bH.Current();bG[bI[0]]=bI[1];}}finally{if(typeof bH=="object"&&"Dispose"in bH)bH.Dispose();}return bG;};w.InMemory=function(bF){return new L.New(bF);};x=l.Var=bB.Class({},f,x);x.New=bB.Ctor(function(){f.New.call(this);},x);y=l.AttrProxy=bB.Class({},null,y);y.OnAfterRenderImpl=function(bF){return new y({$:4,$0:bF});};y.Concat=function(bF){var bG;bG=W.ofSeqNonCopying(bF);return W.TreeReduce(bc.EmptyAttr(),y.Append,bG);};y.Append=function(bF,bG){return bc.AppendTree(bF,bG);};i.ofSeq=function(bF){var bG,bH,bI,bJ,bK,bL;if(bF instanceof j)return bF;else if(bF instanceof a.Array)return i.ofArray(bF);else{bG=z.Get(bF);try{bI=bG.MoveNext();if(!bI)bH=j.Empty;else{bK=new j({$:1});bJ=bK;while(bI){bJ.$0=bG.Current();bG.MoveNext()?bJ=(bL=new j({$:1}),bJ.$1=bL,bL):bI=false;}bJ.$1=j.Empty;bH=bK;}return bH;}finally{if(typeof bG=="object"&&"Dispose"in bG)bG.Dispose();}}};i.ofArray=function(bF){var bG,bH,bI;bG=j.Empty;for(bH=M.length(bF)-1,bI=0;bH>=bI;bH--)bG=new j({$:1,$0:M.get(bF,bH),$1:bG});return bG;};i.head=function(bF){return bF.$==1?bF.$0:i.listEmpty();};i.tail=function(bF){return bF.$==1?bF.$1:i.listEmpty();};i.listEmpty=function(){return k.FailWith("The input list was empty.");};z.Get=function(bF){return bF instanceof a.Array?z.ArrayEnumerator(bF):I.Equals(typeof bF,"string")?z.StringEnumerator(bF):bF.GetEnumerator();};z.ArrayEnumerator=function(bF){return new A.New(0,null,function(bG){var bH;bH=bG.s;return bH<M.length(bF)&&(bG.c=M.get(bF,bH),bG.s=bH+1,true);},void 0);};z.StringEnumerator=function(bF){return new A.New(0,null,function(bG){var bH;bH=bG.s;return bH<bF.length&&(bG.c=bF[bH],bG.s=bH+1,true);},void 0);};z.Get0=function(bF){return bF instanceof a.Array?z.ArrayEnumerator(bF):I.Equals(typeof bF,"string")?z.StringEnumerator(bF):"GetEnumerator0"in bF?bF.GetEnumerator0():bF.GetEnumerator();};A=z.T=bB.Class({Dispose:function(){if(this.d)this.d(this);},MoveNext:function(){return this.n(this);},Current:function(){return this.c;}},f,A);A.New=bB.Ctor(function(bF,bG,bH,bI){f.New.call(this);this.s=bF;this.c=bG;this.n=bH;this.d=bI;},A);B.Delay=function(bF){return function(bG){try{(bF(null))(bG);}catch(bH){bG.k({$:1,$0:bH});}};};B.Bind=function(bF,bG){return B.checkCancel(function(bH){bF(N.New(function(bI){var bJ;if(bI.$==0){bJ=bI.$0;B.scheduler().Fork(function(){try{(bG(bJ))(bH);}catch(bK){bH.k({$:1,$0:bK});}});}else B.scheduler().Fork(function(){bH.k(bI);});},bH.ct));});};B.Sleep=function(bF){return function(bG){var bH,bI;bH=void 0;bI=void 0;bH=a.setTimeout(function(){bI.Dispose();B.scheduler().Fork(function(){bG.k({$:0,$0:null});});},bF);bI=B.Register(bG.ct,function(){a.clearTimeout(bH);B.scheduler().Fork(function(){B.cancel(bG);});});};};B.Zero=function(){O.$cctor();return O.Zero;};B.Start=function(bF,bG){var bH,bI;bH=(bI=(B.defCTS())[0],bG==null?bI:bG.$0);B.scheduler().Fork(function(){if(!bH.c)bF(N.New(function(bJ){if(bJ.$==1)B.UncaughtAsyncError(bJ.$0);},bH));});};B.checkCancel=function(bF){return function(bG){if(bG.ct.c)B.cancel(bG);else bF(bG);};};B.Register=function(bF,bG){var bH;return bF===B.noneCT()?{Dispose:function(){return null;}}:(bH=bF.r.push(bG)-1,{Dispose:function(){return M.set(bF.r,bH,a.ignore);}});};B.cancel=function(bF){bF.k({$:2,$0:new _3.New(bF.ct)});};B.defCTS=function(){O.$cctor();return O.defCTS;};B.UncaughtAsyncError=function(bF){bC.log("WebSharper: Uncaught asynchronous exception",bF);};B.scheduler=function(){O.$cctor();return O.scheduler;};B.noneCT=function(){O.$cctor();return O.noneCT;};B.Return=function(bF){return function(bG){bG.k({$:0,$0:bF});};};B.FromContinuations=function(bF){return function(bG){var bH;function bI(bJ){if(bH[0])k.FailWith("A continuation provided by Async.FromContinuations was invoked multiple times");else{bH[0]=true;B.scheduler().Fork(bJ);}}bH=[false];bF(function(bJ){bI(function(){bG.k({$:0,$0:bJ});});},function(bJ){bI(function(){bG.k({$:1,$0:bJ});});},function(bJ){bI(function(){bG.k({$:2,$0:bJ});});});};};E.GetFieldValues=function(bF){var bG,bH;bG=[];for(var bI in bF)bG.push(bF[bI]);return bG;};G=F.Dictionary=bB.Class({set_Item:function(bF,bG){this.set(bF,bG);},ContainsKey:function(bF){var bG,bH;bG=this;bH=this.data[this.hash(bF)];return bH==null?false:M.exists(function(bI){return bG.equals.apply(null,[(k.KeyValue(bI))[0],bF]);},bH);},TryGetValue:function(bF,bG){var bH,bI,bJ;bH=this;bI=this.data[this.hash(bF)];return bI==null?false:(bJ=M.tryPick(function(bK){var bL;bL=k.KeyValue(bK);return bH.equals.apply(null,[bL[0],bF])?{$:1,$0:bL[1]}:null;},bI),bJ!=null&&bJ.$==1&&(bG.set(bJ.$0),true));},Remove:function(bF){return this.remove(bF);},get_Keys:function(){return new _8.New(this);},set:function(bF,bG){var bH,bI,bJ,bK;bH=this;bI=this.hash(bF);bJ=this.data[bI];bJ==null?(this.count=this.count+1,this.data[bI]=new a.Array({K:bF,V:bG})):(bK=M.tryFindIndex(function(bL){return bH.equals.apply(null,[(k.KeyValue(bL))[0],bF]);},bJ),bK==null?(this.count=this.count+1,bJ.push({K:bF,V:bG})):bJ[bK.$0]={K:bF,V:bG});},remove:function(bF){var bG,bH,bI,bJ;bG=this;bH=this.hash(bF);bI=this.data[bH];return bI==null?false:(bJ=M.filter(function(bK){return!bG.equals.apply(null,[(k.KeyValue(bK))[0],bF]);},bI),M.length(bJ)<bI.length&&(this.count=this.count-1,this.data[bH]=bJ,true));},get_Item:function(bF){return this.get(bF);},get:function(bF){var bG,bH;bG=this;bH=this.data[this.hash(bF)];return bH==null?_5.notPresent():M.pick(function(bI){var bJ;bJ=k.KeyValue(bI);return bG.equals.apply(null,[bJ[0],bF])?{$:1,$0:bJ[1]}:null;},bH);},GetEnumerator:function(){return z.Get0(this);},GetEnumerator0:function(){return z.Get0(M.concat(E.GetFieldValues(this.data)));}},f,G);G.New$5=bB.Ctor(function(){G.New$6.call(this,[],I.Equals,I.Hash);},G);G.New$6=bB.Ctor(function(bF,bG,bH){var bI,bJ;f.New.call(this);this.equals=bG;this.hash=bH;this.count=0;this.data=[];bI=z.Get(bF);try{while(bI.MoveNext()){bJ=bI.Current();this.set(bJ.K,bJ.V);}}finally{if(typeof bI=="object"&&"Dispose"in bI)bI.Dispose();}},G);H.Doc=function(){T.$cctor();return T.Doc;};H.CreateText=function(bF){return H.Doc().createTextNode(bF);};H.ChildrenArray=function(bF){var bG,bH,bI;bG=[];for(bH=0,bI=bF.childNodes.length-1;bH<=bI;bH++)bG.push(bF.childNodes[bH]);return bG;};H.CreateElement=function(bF){return H.Doc().createElement(bF);};H.IterSelector=function(bF,bG,bH){var bI,bJ,bK;bI=bF.querySelectorAll(bG);for(bJ=0,bK=bI.length-1;bJ<=bK;bJ++)bH(bI[bJ]);};H.InsertAt=function(bF,bG,bH){var bI;if(!(bH.parentNode===bF&&bG===(bI=bH.nextSibling,I.Equals(bI,null)?null:bI)))bF.insertBefore(bH,bG);};H.RemoveNode=function(bF,bG){if(bG.parentNode===bF)bF.removeChild(bG);};I.Equals=function(bF,bG){var bH,bI,bJ,bK;if(bF===bG)return true;else{bH=typeof bF;if(bH=="object"){if(bF===null||bF===void 0||bG===null||bG===void 0)return false;else if("Equals"in bF)return bF.Equals(bG);else if(bF instanceof a.Array&&bG instanceof a.Array)return I.arrayEquals(bF,bG);else if(bF instanceof a.Date&&bG instanceof a.Date)return I.dateEquals(bF,bG);else{bI=[true];for(var bL in bF)if(function(bM){bI[0]=!bF.hasOwnProperty(bM)||bG.hasOwnProperty(bM)&&I.Equals(bF[bM],bG[bM]);return!bI[0];}(bL))break;if(bI[0]){for(var bM in bG)if(function(bN){bI[0]=!bG.hasOwnProperty(bN)||bF.hasOwnProperty(bN);return!bI[0];}(bM))break;}return bI[0];}}else return bH=="function"&&("$Func"in bF?bF.$Func===bG.$Func&&bF.$Target===bG.$Target:"$Invokes"in bF&&"$Invokes"in bG&&I.arrayEquals(bF.$Invokes,bG.$Invokes));}};I.arrayEquals=function(bF,bG){var bH,bI;if(M.length(bF)===M.length(bG)){bH=true;bI=0;while(bH&&bI<M.length(bF)){!I.Equals(M.get(bF,bI),M.get(bG,bI))?bH=false:void 0;bI=bI+1;}return bH;}else return false;};I.dateEquals=function(bF,bG){return bF.getTime()===bG.getTime();};I.Hash=function(bF){var bG;bG=typeof bF;return bG=="function"?0:bG=="boolean"?bF?1:0:bG=="number"?bF:bG=="string"?I.hashString(bF):bG=="object"?bF==null?0:bF instanceof a.Array?I.hashArray(bF):I.hashObject(bF):0;};I.hashString=function(bF){var bG,bH,bI;if(bF===null)return 0;else{bG=5381;for(bH=0,bI=bF.length-1;bH<=bI;bH++)bG=I.hashMix(bG,bF[bH].charCodeAt());return bG;}};I.hashArray=function(bF){var bG,bH,bI;bG=-34948909;for(bH=0,bI=M.length(bF)-1;bH<=bI;bH++)bG=I.hashMix(bG,I.Hash(M.get(bF,bH)));return bG;};I.hashObject=function(bF){var bG,bH;if("GetHashCode"in bF)return bF.GetHashCode();else{bG=[0];for(var bI in bF)if(function(bJ){bG[0]=I.hashMix(I.hashMix(bG[0],I.hashString(bJ)),I.Hash(bF[bJ]));return false;}(bI))break;return bG[0];}};I.hashMix=function(bF,bG){return(bF<<5)+bF+bG;};I.Compare=function(bF,bG){var bH,bI,bJ,bK,bL,bM;if(bF===bG)return 0;else{bI=typeof bF;switch(bI=="function"?1:bI=="boolean"?2:bI=="number"?2:bI=="string"?2:bI=="object"?3:0){case 0:return typeof bG=="undefined"?0:-1;case 1:return k.FailWith("Cannot compare function values.");case 2:return bF<bG?-1:1;case 3:if(bF===null)bJ=-1;else if(bG===null)bJ=1;else if("CompareTo"in bF)bJ=bF.CompareTo(bG);else if("CompareTo0"in bF)bJ=bF.CompareTo0(bG);else if(bF instanceof a.Array&&bG instanceof a.Array)bJ=I.compareArrays(bF,bG);else if(bF instanceof a.Date&&bG instanceof a.Date)bJ=I.compareDates(bF,bG);else{bK=[0];for(var bN in bF)if(function(bO){return!bF.hasOwnProperty(bO)?false:!bG.hasOwnProperty(bO)?(bK[0]=1,true):(bK[0]=I.Compare(bF[bO],bG[bO]),bK[0]!==0);}(bN))break;if(bK[0]===0){for(var bO in bG)if(function(bP){return!bG.hasOwnProperty(bP)?false:!bF.hasOwnProperty(bP)&&(bK[0]=-1,true);}(bO))break;}bJ=bK[0];}return bJ;}}};I.compareArrays=function(bF,bG){var bH,bI;if(M.length(bF)<M.length(bG))return -1;else if(M.length(bF)>M.length(bG))return 1;else{bH=0;bI=0;while(bH===0&&bI<M.length(bF)){bH=I.Compare(M.get(bF,bI),M.get(bG,bI));bI=bI+1;}return bH;}};I.compareDates=function(bF,bG){return I.Compare(bF.getTime(),bG.getTime());};J.Const=function(bF){var bG;bG=K.New({$:0,$0:bF});return function(){return bG;};};J.Map=function(bF,bG){return J.CreateLazy(function(){return K.Map(bF,bG());});};J.Bind=function(bF,bG){return J.Join(J.Map(bF,bG));};J.CreateLazy=function(bF){var bG;bG={c:null,o:bF};return function(){var bH,bI;bH=bG.c;return bH===null?(bH=bG.o(),bG.c=bH,(bI=bH.s,bI!=null&&bI.$==0)?bG.o=null:K.WhenObsoleteRun(bH,function(){bG.c=null;}),bH):bH;};};J.Sink=function(bF,bG){function bH(){K.WhenRun(bG(),bF,function(){B.scheduler().Fork(bH);});}B.scheduler().Fork(bH);};J.Map2Unit=function(bF,bG){return J.CreateLazy(function(){return K.Map2Unit(bF(),bG());});};J.Join=function(bF){return J.CreateLazy(function(){return K.Join(bF());});};J=l.View=bB.Class({},null,J);K.Obsolete=function(bF){var bG,bH,bI,bJ,bK;bH=bF.s;if(bH==null||(bH!=null&&bH.$==2?(bG=bH.$1,false):bH!=null&&bH.$==3?(bG=bH.$1,false):true))void 0;else{bF.s=null;for(bI=0,bJ=M.length(bG)-1;bI<=bJ;bI++){bK=M.get(bG,bI);typeof bK=="object"?function(bL){K.Obsolete(bL);}(bK):bK();}}};K.New=function(bF){return{s:bF};};L=w.ArrayStorage=bB.Class({SRemoveIf:function(bF,bG){return M.filter(function(bH){return!bF(bH);},bG);},SSetAt:function(bF,bG,bH){M.set(bH,bF,bG);return bH;},SAppend:function(bF,bG){bG.push(bF);return bG;},SInit:function(){return this.init;}},f,L);L.New=bB.Ctor(function(bF){f.New.call(this);this.init=bF;},L);M.ofSeq=function(bF){var bG,bH;if(bF instanceof a.Array)return bF.slice();else if(bF instanceof j)return M.ofList(bF);else{bG=[];bH=z.Get(bF);try{while(bH.MoveNext())bG.push(bH.Current());return bG;}finally{if(typeof bH=="object"&&"Dispose"in bH)bH.Dispose();}}};M.tryFindIndex=function(bF,bG){var bH,bI;bH=null;bI=0;while(bI<bG.length&&bH==null){bF(bG[bI])?bH={$:1,$0:bI}:void 0;bI=bI+1;}return bH;};M.ofList=function(bF){var bG,bH;bH=[];bG=bF;while(!(bG.$==0)){bH.push(i.head(bG));bG=i.tail(bG);}return bH;};M.exists=function(bF,bG){var bH,bI,bJ,bK;bH=false;bI=0;bK=M.length(bG);while(!bH&&bI<bK)if(bF(bG[bI]))bH=true;else bI=bI+1;return bH;};M.tryPick=function(bF,bG){var bH,bI,bJ;bH=null;bI=0;while(bI<bG.length&&bH==null){bJ=bF(bG[bI]);bJ!=null&&bJ.$==1?bH=bJ:void 0;bI=bI+1;}return bH;};M.filter=function(bF,bG){var bH,bI,bJ;bH=[];for(bI=0,bJ=bG.length-1;bI<=bJ;bI++)if(bF(bG[bI]))bH.push(bG[bI]);return bH;};M.map=function(bF,bG){var bH,bI,bJ;bH=new a.Array(bG.length);for(bI=0,bJ=bG.length-1;bI<=bJ;bI++)bH[bI]=bF(bG[bI]);return bH;};M.iter=function(bF,bG){var bH,bI;for(bH=0,bI=bG.length-1;bH<=bI;bH++)bF(bG[bH]);};M.foldBack=function(bF,bG,bH){var bI,bJ,bK,bL,bM;bI=bH;bK=bG.length;for(bL=1,bM=bK;bL<=bM;bL++)bI=bF(bG[bK-bL],bI);return bI;};M.pick=function(bF,bG){var bH;bH=M.tryPick(bF,bG);return bH==null?k.FailWith("KeyNotFoundException"):bH.$0;};M.concat=function(bF){return a.Array.prototype.concat.apply([],M.ofSeq(bF));};M.choose=function(bF,bG){var bH,bI,bJ,bK;bH=[];for(bI=0,bJ=bG.length-1;bI<=bJ;bI++){bK=bF(bG[bI]);bK==null?void 0:bH.push(bK.$0);}return bH;};M.create=function(bF,bG){var bH,bI,bJ;bH=new a.Array(bF);for(bI=0,bJ=bF-1;bI<=bJ;bI++)bH[bI]=bG;return bH;};M.init=function(bF,bG){var bH,bI,bJ;bF<0?k.FailWith("Negative size given."):null;bH=new a.Array(bF);for(bI=0,bJ=bF-1;bI<=bJ;bI++)bH[bI]=bG(bI);return bH;};M.forall=function(bF,bG){var bH,bI,bJ,bK;bH=true;bI=0;bK=M.length(bG);while(bH&&bI<bK)if(bF(bG[bI]))bI=bI+1;else bH=false;return bH;};M.length=function(bF){return bF.dims===2?bF.length*bF.length:bF.length;};M.get=function(bF,bG){M.checkBounds(bF,bG);return bF[bG];};M.set=function(bF,bG,bH){M.checkBounds(bF,bG);bF[bG]=bH;};M.checkBounds=function(bF,bG){if(bG<0||bG>=bF.length)k.FailWith("Index was outside the bounds of the array.");};N.New=function(bF,bG){return{k:bF,ct:bG};};O.$cctor=function(){O.$cctor=a.ignore;O.noneCT=P.New(false,[]);O.scheduler=new _1.New();O.defCTS=[new _4.New()];O.Zero=B.Return();O.GetCT=function(bF){bF.k({$:0,$0:bF.ct});};};P.New=function(bF,bG){return{c:bF,r:bG};};Q.$cctor=function(){Q.$cctor=a.ignore;Q.LoadedTemplates=new G.New$5();Q.LocalTemplatesLoaded=false;Q.TextHoleRE="\\${([^}]+)}";};R=F.HashSet=bB.Class({Add:function(bF){return this.add(bF);},Contains:function(bF){var bG;bG=this.data[this.hash(bF)];return bG==null?false:this.arrContains(bF,bG);},add:function(bF){var bG,bH;bG=this.hash(bF);bH=this.data[bG];return bH==null?(this.data[bG]=[bF],this.count=this.count+1,true):this.arrContains(bF,bH)?false:(bH.push(bF),this.count=this.count+1,true);},arrContains:function(bF,bG){var bH,bI,bJ,bK;bH=true;bI=0;bK=bG.length;while(bH&&bI<bK)if(this.equals.apply(null,[bG[bI],bF]))bH=false;else bI=bI+1;return!bH;},ExceptWith:function(bF){var bG;bG=z.Get(bF);try{while(bG.MoveNext())this.Remove(bG.Current());}finally{if(typeof bG=="object"&&"Dispose"in bG)bG.Dispose();}},get_Count:function(){return this.count;},CopyTo:function(bF){var bG,bH,bI,bJ;bG=0;bH=bp.concat(this.data);for(bI=0,bJ=bH.length-1;bI<=bJ;bI++)M.set(bF,bI,bH[bI]);},IntersectWith:function(bF){var bG,bH,bI,bJ,bK;bG=new R.New$4(bF,this.equals,this.hash);bH=bp.concat(this.data);for(bI=0,bJ=bH.length-1;bI<=bJ;bI++){bK=bH[bI];!bG.Contains(bK)?this.Remove(bK):void 0;}},Remove:function(bF){var bG;bG=this.data[this.hash(bF)];return bG==null?false:this.arrRemove(bF,bG)&&(this.count=this.count-1,true);},arrRemove:function(bF,bG){var bH,bI,bJ,bK;bH=true;bI=0;bK=bG.length;while(bH&&bI<bK)if(this.equals.apply(null,[bG[bI],bF])){bG.splice.apply(bG,[bI,1]);bH=false;}else bI=bI+1;return!bH;},GetEnumerator:function(){return z.Get(bp.concat(this.data));},GetEnumerator0:function(){return z.Get(bp.concat(this.data));}},f,R);R.New$3=bB.Ctor(function(){R.New$4.call(this,[],I.Equals,I.Hash);},R);R.New$4=bB.Ctor(function(bF,bG,bH){var bI;f.New.call(this);this.equals=bG;this.hash=bH;this.data=[];this.count=0;bI=z.Get(bF);try{while(bI.MoveNext())this.add(bI.Current());}finally{if(typeof bI=="object"&&"Dispose"in bI)bI.Dispose();}},R);R.New$2=bB.Ctor(function(bF){R.New$4.call(this,bF,I.Equals,I.Hash);},R);T.$cctor=function(){T.$cctor=a.ignore;T.Doc=self.document;};U.LinkElement=function(bF,bG){U.InsertDoc(bF,bG,null);};U.CreateEmbedNode=function(){return{Current:null,Dirty:false};};U.UpdateEmbedNode=function(bF,bG){bF.Current=bG;bF.Dirty=true;};U.InsertDoc=function(bF,bG,bH){var bI;return bG!=null&&bG.$==1?U.InsertNode(bF,bG.$0.El,bH):bG!=null&&bG.$==2?(bI=bG.$0,(bI.Dirty=false,U.InsertDoc(bF,bI.Current,bH))):bG==null?bH:bG!=null&&bG.$==4?U.InsertNode(bF,bG.$0.Text,bH):bG!=null&&bG.$==5?U.InsertNode(bF,bG.$0,bH):bG!=null&&bG.$==6?M.foldBack(function(bJ,bK){return bJ==null||bJ.constructor===X?U.InsertDoc(bF,bJ,bK):U.InsertNode(bF,bJ,bK);},bG.$0.Els,bH):U.InsertDoc(bF,bG.$0,U.InsertDoc(bF,bG.$1,bH));};U.CreateRunState=function(bF,bG){return bh.New(bi.get_Empty(),U.CreateElemNode(bF,bc.EmptyAttr(),bG));};U.PerformAnimatedUpdate=function(bF,bG,bH){var bI;return _9.get_UseAnimations()?(bI=null,B.Delay(function(){var bJ,bK,bL;bJ=bi.FindAll(bH);bK=U.ComputeChangeAnim(bG,bJ);bL=U.ComputeEnterAnim(bG,bJ);return B.Bind(_9.Play(_9.Append(bK,U.ComputeExitAnim(bG,bJ))),function(){return B.Bind(U.SyncElemNodesNextFrame(bF,bG),function(){return B.Bind(_9.Play(bL),function(){bG.PreviousNodes=bJ;return B.Return(null);});});});})):U.SyncElemNodesNextFrame(bF,bG);};U.PerformSyncUpdate=function(bF,bG,bH){var bI;bI=bi.FindAll(bH);U.SyncElemNode(bF,bG.Top);bG.PreviousNodes=bI;};U.CreateElemNode=function(bF,bG,bH){var bI;U.LinkElement(bF,bH);bI=bc.Insert(bF,bG);return Y.New(bI,bH,null,bF,bl.Int(),bB.GetOptional(bI.OnAfterRender));};U.InsertNode=function(bF,bG,bH){H.InsertAt(bF,bH,bG);return bG;};U.SyncElemNodesNextFrame=function(bF,bG){function bH(bI){a.requestAnimationFrame(function(){U.SyncElemNode(bF,bG.Top);bI();});}return _.BatchUpdatesEnabled()?B.FromContinuations(function(bI,bJ,bK){return bH.apply(null,[bI,bJ,bK]);}):(U.SyncElemNode(bF,bG.Top),B.Return(null));};U.ComputeExitAnim=function(bF,bG){return _9.Concat(M.map(function(bH){return bc.GetExitAnim(bH.Attr);},bi.ToArray(bi.Except(bG,bi.Filter(function(bH){return bc.HasExitAnim(bH.Attr);},bF.PreviousNodes)))));};U.ComputeEnterAnim=function(bF,bG){return _9.Concat(M.map(function(bH){return bc.GetEnterAnim(bH.Attr);},bi.ToArray(bi.Except(bF.PreviousNodes,bi.Filter(function(bH){return bc.HasEnterAnim(bH.Attr);},bG)))));};U.ComputeChangeAnim=function(bF,bG){var bH;function bI(bJ){return bc.HasChangeAnim(bJ.Attr);}bH=function(bJ){return bi.Filter(bI,bJ);};return _9.Concat(M.map(function(bJ){return bc.GetChangeAnim(bJ.Attr);},bi.ToArray(bi.Intersect(bH(bF.PreviousNodes),bH(bG)))));};U.SyncElemNode=function(bF,bG){!bF?U.SyncElement(bG):void 0;U.Sync(bG.Children);U.AfterRender(bG);};U.SyncElement=function(bF){function bG(bH){function bI(bJ){var bK,bL;return bJ!=null&&bJ.$==0?bI(bJ.$0)||bI(bJ.$1):bJ!=null&&bJ.$==2?(bK=bJ.$0,bK.Dirty||bI(bK.Current)):bJ!=null&&bJ.$==6&&(bL=bJ.$0,bL.Dirty||M.exists(bG,bL.Holes));}return bI(bH.Children);}bc.Sync(bF.El,bF.Attr);bG(bF)?U.DoSyncElement(bF):void 0;};U.Sync=function(bF){var bG,bH;if(bF!=null&&bF.$==1)U.SyncElemNode(false,bF.$0);else if(bF!=null&&bF.$==2)U.Sync(bF.$0.Current);else if(bF==null);else if(bF!=null&&bF.$==5);else if(bF!=null&&bF.$==4){bG=bF.$0;bG.Dirty?(bG.Text.nodeValue=bG.Value,bG.Dirty=false):void 0;}else if(bF!=null&&bF.$==6){bH=bF.$0;M.iter(function(bI){U.SyncElemNode(false,bI);},bH.Holes);M.iter(function(bI){bc.Sync(bI[0],bI[1]);},bH.Attrs);U.AfterRender(bH);}else{U.Sync(bF.$0);U.Sync(bF.$1);}};U.AfterRender=function(bF){var bG;bG=bB.GetOptional(bF.Render);bG!=null&&bG.$==1?(bG.$0(bF.El),bB.SetOptional(bF,"Render",null)):void 0;};U.DoSyncElement=function(bF){var bG,bH,bI;function bJ(bK,bL){var bM,bN;return bK!=null&&bK.$==1?bK.$0.El:bK!=null&&bK.$==2?(bM=bK.$0,bM.Dirty?(bM.Dirty=false,U.InsertDoc(bG,bM.Current,bL)):bJ(bM.Current,bL)):bK==null?bL:bK!=null&&bK.$==4?bK.$0.Text:bK!=null&&bK.$==5?bK.$0:bK!=null&&bK.$==6?(bN=bK.$0,(bN.Dirty?bN.Dirty=false:void 0,M.foldBack(function(bO,bP){return bO==null||bO.constructor===X?bJ(bO,bP):bO;},bN.Els,bL))):bJ(bK.$0,bJ(bK.$1,bL));}bG=bF.El;bu.Iter((bH=bF.El,function(bK){H.RemoveNode(bH,bK);}),bu.Except(bu.DocChildren(bF),bu.Children(bF.El,bB.GetOptional(bF.Delimiters))));bJ(bF.Children,(bI=bB.GetOptional(bF.Delimiters),bI!=null&&bI.$==1?bI.$0[1]:null));};V=l.Elt=bB.Class({},t,V);V.New=function(bF,bG,bH){var bI,bJ;bI=U.CreateElemNode(bF,bG,bH.docNode);bJ=bb.Create(bH.updates);return new V.New$1({$:1,$0:bI},J.Map2Unit(bc.Updates(bI.Attr),bJ.v),bF,bJ);};V.New$1=bB.Ctor(function(bF,bG,bH,bI){t.New.call(this,bF,bG);this.docNode$1=bF;this.updates$1=bG;this.elt=bH;this.rvUpdates=bI;},V);W.ofSeqNonCopying=function(bF){var bG,bH;if(bF instanceof a.Array)return bF;else if(bF instanceof j)return M.ofList(bF);else if(bF===null)return[];else{bG=[];bH=z.Get(bF);try{while(bH.MoveNext())bG.push(bH.Current());return bG;}finally{if(typeof bH=="object"&&"Dispose"in bH)bH.Dispose();}}};W.TreeReduce=function(bF,bG,bH){var bI;function bJ(bK,bL){var bM,bN;return bL<=0?bF:bL===1&&(bK>=0&&bK<bI)?M.get(bH,bK):(bN=bL/2>>0,bG(bJ(bK,bN),bJ(bK+bN,bL-bN)));}bI=M.length(bH);return bJ(0,bI);};W.MapTreeReduce=function(bF,bG,bH,bI){var bJ;function bK(bL,bM){var bN,bO;return bM<=0?bG:bM===1&&(bL>=0&&bL<bJ)?bF(M.get(bI,bL)):(bO=bM/2>>0,bH(bK(bL,bO),bK(bL+bO,bM-bO)));}bJ=M.length(bI);return bK(0,bJ);};K.Map=function(bF,bG){var bH,bI;bH=bG.s;return bH!=null&&bH.$==0?K.New({$:0,$0:bF(bH.$0)}):(bI=K.New({$:3,$0:[],$1:[]}),(K.When(bG,function(bJ){K.MarkDone(bI,bG,bF(bJ));},bI),bI));};K.WhenObsoleteRun=function(bF,bG){var bH;bH=bF.s;bH==null?bG():bH!=null&&bH.$==2?bH.$1.push(bG):bH!=null&&bH.$==3?bH.$1.push(bG):void 0;};K.When=function(bF,bG,bH){var bI;bI=bF.s;bI==null?K.Obsolete(bH):bI!=null&&bI.$==2?(K.EnqueueSafe(bI.$1,bH),bG(bI.$0)):bI!=null&&bI.$==3?(bI.$0.push(bG),K.EnqueueSafe(bI.$1,bH)):bG(bI.$0);};K.MarkDone=function(bF,bG,bH){var bI;if(bI=bG.s,bI!=null&&bI.$==0)K.MarkForever(bF,bH);else K.MarkReady(bF,bH);};K.WhenRun=function(bF,bG,bH){var bI;bI=bF.s;bI==null?bH():bI!=null&&bI.$==2?(bI.$1.push(bH),bG(bI.$0)):bI!=null&&bI.$==3?(bI.$0.push(bG),bI.$1.push(bH)):bG(bI.$0);};K.Copy=function(bF){var bG,bH,bI;bG=bF.s;return bG==null?bF:bG!=null&&bG.$==2?(bH=K.New({$:2,$0:bG.$0,$1:[]}),(K.WhenObsolete(bF,bH),bH)):bG!=null&&bG.$==3?(bI=K.New({$:3,$0:[],$1:[]}),(K.When(bF,function(bJ){K.MarkDone(bI,bF,bJ);},bI),bI)):bF;};K.Map2Unit=function(bF,bG){var bH,bI,bJ;function bK(){var bL,bM,bN;if(!(bL=bJ.s,bL!=null&&bL.$==0||bL!=null&&bL.$==2)){bM=K.ValueAndForever(bF);bN=K.ValueAndForever(bG);bM!=null&&bM.$==1?bN!=null&&bN.$==1?bM.$0[1]&&bN.$0[1]?K.MarkForever(bJ,null):K.MarkReady(bJ,null):void 0:void 0;}}bH=bF.s;bI=bG.s;return bH!=null&&bH.$==0?bI!=null&&bI.$==0?K.New({$:0,$0:null}):bG:bI!=null&&bI.$==0?bF:(bJ=K.New({$:3,$0:[],$1:[]}),(K.When(bF,bK,bJ),K.When(bG,bK,bJ),bJ));};K.Join=function(bF){var bG;bG=K.New({$:3,$0:[],$1:[]});K.When(bF,function(bH){var bI;bI=bH();K.When(bI,function(bJ){var bK,bL;if((bK=bI.s,bK!=null&&bK.$==0)&&(bL=bF.s,bL!=null&&bL.$==0))K.MarkForever(bG,bJ);else K.MarkReady(bG,bJ);},bG);},bG);return bG;};K.EnqueueSafe=function(bF,bG){var bH,bI,bJ,bK;bF.push(bG);if(bF.length%20===0){bH=bF.slice(0);bt.Clear(bF);for(bI=0,bJ=M.length(bH)-1;bI<=bJ;bI++){bK=M.get(bH,bI);typeof bK=="object"?function(bL){if(bL.s)bF.push(bL);}(bK):function(bL){bF.push(bL);}(bK);}}else void 0;};K.MarkForever=function(bF,bG){var bH,bI,bJ,bK;bH=bF.s;if(bH!=null&&bH.$==3){bF.s={$:0,$0:bG};bI=bH.$0;for(bJ=0,bK=M.length(bI)-1;bJ<=bK;bJ++)(M.get(bI,bJ))(bG);}else void 0;};K.MarkReady=function(bF,bG){var bH,bI,bJ,bK;bH=bF.s;if(bH!=null&&bH.$==3){bF.s={$:2,$0:bG,$1:bH.$1};bI=bH.$0;for(bJ=0,bK=M.length(bI)-1;bJ<=bK;bJ++)(M.get(bI,bJ))(bG);}else void 0;};K.WhenObsolete=function(bF,bG){var bH;bH=bF.s;bH==null?K.Obsolete(bG):bH!=null&&bH.$==2?K.EnqueueSafe(bH.$1,bG):bH!=null&&bH.$==3?K.EnqueueSafe(bH.$1,bG):void 0;};K.ValueAndForever=function(bF){var bG;bG=bF.s;return bG!=null&&bG.$==0?{$:1,$0:[bG.$0,true]}:bG!=null&&bG.$==2?{$:1,$0:[bG.$0,false]}:null;};Y=l.DocElemNode=bB.Class({Equals:function(bF){return this.ElKey===bF.ElKey;},GetHashCode:function(){return this.ElKey;}},null,Y);Y.New=function(bF,bG,bH,bI,bJ,bK){var bL;return new Y((bL={Attr:bF,Children:bG,El:bI,ElKey:bJ},(bB.SetOptional(bL,"Delimiters",bH),bB.SetOptional(bL,"Render",bK),bL)));};_0=l.Var$1=bB.Class({},f,_0);_0.Create$1=function(bF){return new bf.New(false,K.New({$:2,$0:bF,$1:[]}),bF);};_1=B.Scheduler=bB.Class({Fork:function(bF){var bG;bG=this;this.robin.push(bF);this.idle?(this.idle=false,a.setTimeout(function(){bG.tick();},0)):void 0;},tick:function(){var bF,bG,bH;bG=this;bH=bE.now();bF=true;while(bF)if(this.robin.length===0){this.idle=true;bF=false;}else{(this.robin.shift())();bE.now()-bH>40?(a.setTimeout(function(){bG.tick();},0),bF=false):void 0;}}},f,_1);_1.New=bB.Ctor(function(){f.New.call(this);this.idle=true;this.robin=[];},_1);_3=e.OperationCanceledException=bB.Class({},_2,_3);_3.New=bB.Ctor(function(bF){_3.New$1.call(this,"The operation was canceled.",null,bF);},_3);_3.New$1=bB.Ctor(function(bF,bG,bH){this.message=bF;this.inner=bG;X.setPrototypeOf(this,_3.prototype);this.ct=bH;},_3);_4=e.CancellationTokenSource=bB.Class({},f,_4);_4.New=bB.Ctor(function(){f.New.call(this);this.c=false;this.pending=null;this.r=[];this.init=1;},_4);_5.notPresent=function(){return k.FailWith("The given key was not present in the dictionary.");};_6.convertTextNode=function(bF){var bG,bH,bI,bJ,bK,bL;bG=null;bH=0;bJ=bF.textContent;bK=new a.RegExp(s.TextHoleRE(),"g");while(bG=bK.exec(bJ),bG!==null){bF.parentNode.insertBefore(self.document.createTextNode(_7.string(bJ,{$:1,$0:bH},{$:1,$0:bK.lastIndex-M.get(bG,0).length-1})),bF);bH=bK.lastIndex;bL=self.document.createElement("span");bL.setAttribute("ws-replace",M.get(bG,1).toLowerCase());bF.parentNode.insertBefore(bL,bF);}bK.lastIndex=0;bF.textContent=_7.string(bJ,{$:1,$0:bH},null);};_6.failNotLoaded=function(bF){bC.warn("Instantiating non-loaded template",bF);};_6.fillTextHole=function(bF,bG,bH){var bI;bI=bF.querySelector("[ws-replace]");return I.Equals(bI,null)?(bC.warn("Filling non-existent text hole",bH),null):(bI.parentNode.replaceChild(new a.Text(bG),bI),{$:1,$0:bI.getAttribute("ws-replace")});};_6.removeHolesExcept=function(bF,bG){function bH(bI){H.IterSelector(bF,"["+bI+"]",function(bJ){if(!bG.Contains(bJ.getAttribute(bI)))bJ.removeAttribute(bI);});}bH("ws-attr");bH("ws-onafterrender");bH("ws-var");H.IterSelector(bF,"[ws-hole]",function(bI){if(!bG.Contains(bI.getAttribute("ws-hole"))){bI.removeAttribute("ws-hole");while(bI.hasChildNodes())bI.removeChild(bI.lastChild);}});H.IterSelector(bF,"[ws-replace]",function(bI){if(!bG.Contains(bI.getAttribute("ws-replace")))bI.parentNode.removeChild(bI);});H.IterSelector(bF,"[ws-on]",function(bI){bI.setAttribute("ws-on",q.concat(" ",M.filter(function(bJ){return bG.Contains(M.get(q.SplitChars(bJ,[":"],1),1));},q.SplitChars(bI.getAttribute("ws-on"),[" "],1))));});H.IterSelector(bF,"[ws-attr-holes]",function(bI){var bJ,bK,bL,bM,bN;bJ=q.SplitChars(bI.getAttribute("ws-attr-holes"),[" "],1);for(bK=0,bL=bJ.length-1;bK<=bL;bK++){bM=M.get(bJ,bK);bI.setAttribute(bM,(bN=new a.RegExp(s.TextHoleRE(),"g"),bI.getAttribute(bM).replace(bN,function(bO,bP){return bG.Contains(bP)?bO:"";})));}});};_6.fillInstanceAttrs=function(bF,bG){var bH,bI,bJ,bK,bL;_6.convertAttrs(bG);bH=bG.nodeName.toLowerCase();bI=bF.querySelector("[ws-attr="+bH+"]");if(I.Equals(bI,null))bC.warn("Filling non-existent attr hole",bH);else{bI.removeAttribute("ws-attr");for(bJ=0,bK=bG.attributes.length-1;bJ<=bK;bJ++){bL=bG.attributes.item(bJ);bL.name==="class"&&bI.hasAttribute("class")?bI.setAttribute("class",bI.getAttribute("class")+" "+bL.nodeValue):bI.setAttribute(bL.name,bL.nodeValue);}}};_6.mapHoles=function(bF,bG){function bH(bI){H.IterSelector(bF,"["+bI+"]",function(bJ){var bK,bL;bK=(bL=null,[bG.TryGetValue(bJ.getAttribute(bI).toLowerCase(),{get:function(){return bL;},set:function(bM){bL=bM;}}),bL]);bK[0]?bJ.setAttribute(bI,bK[1]):void 0;});}bH("ws-hole");bH("ws-replace");bH("ws-attr");bH("ws-onafterrender");bH("ws-var");H.IterSelector(bF,"[ws-on]",function(bI){bI.setAttribute("ws-on",q.concat(" ",M.map(function(bJ){var bK,bL,bM;bK=q.SplitChars(bJ,[":"],1);bL=(bM=null,[bG.TryGetValue(M.get(bK,1),{get:function(){return bM;},set:function(bN){bM=bN;}}),bM]);return bL[0]?M.get(bK,0)+":"+bL[1]:bJ;},q.SplitChars(bI.getAttribute("ws-on"),[" "],1))));});H.IterSelector(bF,"[ws-attr-holes]",function(bI){var bJ,bK,bL;bJ=q.SplitChars(bI.getAttribute("ws-attr-holes"),[" "],1);for(bK=0,bL=bJ.length-1;bK<=bL;bK++)(function(){var bM;function bN(bO,bP){var bQ;bQ=k.KeyValue(bP);return bO.replace(new a.RegExp("\\${"+bQ[0]+"}","ig"),"${"+bQ[1]+"}");}bM=M.get(bJ,bK);return bI.setAttribute(bM,(((bB.Curried3(p.fold))(bN))(bI.getAttribute(bM)))(bG));}());});};_6.fill=function(bF,bG,bH){while(true)if(bF.hasChildNodes())bH=bG.insertBefore(bF.lastChild,bH);else return null;};_6.convertAttrs=function(bF){var bH,bI,bJ,bK,bL,bM,bN,bO;function bG(bP){var bQ;bQ=bF.getAttribute(bP);bQ===null?void 0:bF.setAttribute(bP,bQ.toLowerCase());}bH=bF.attributes;bI=[];bJ=[];bK=[];for(bL=0,bM=bH.length-1;bL<=bM;bL++){bN=bH.item(bL);q.StartsWith(bN.nodeName,"ws-on")&&bN.nodeName!=="ws-onafterrender"&&bN.nodeName!=="ws-on"?(bI.push(bN.nodeName),bJ.push(_7.string(bN.nodeName,{$:1,$0:"ws-on".length},null)+":"+bN.nodeValue.toLowerCase())):!q.StartsWith(bN.nodeName,"ws-")&&(new a.RegExp(s.TextHoleRE())).test(bN.nodeValue)?(bN.nodeValue=(bO=new a.RegExp(s.TextHoleRE(),"g"),bN.nodeValue.replace(bO,function(bP,bQ){return"${"+bQ.toLowerCase()+"}";})),bK.push(bN.nodeName)):void 0;}!(bJ.length==0)?bF.setAttribute("ws-on",q.concat(" ",bJ)):void 0;!(bK.length==0)?bF.setAttribute("ws-attr-holes",q.concat(" ",bK)):void 0;bG("ws-hole");bG("ws-replace");bG("ws-attr");bG("ws-onafterrender");bG("ws-var");M.iter(function(bP){bF.removeAttribute(bP);},bI);};_7.string=function(bF,bG,bH){return bG==null?bH!=null&&bH.$==1?bF.slice(0,bH.$0+1):"":bH==null?bF.slice(bG.$0):bF.slice(bG.$0,bH.$0+1);};p.insufficient=function(){return k.FailWith("The input sequence has an insufficient number of elements.");};_8=F.KeyCollection=bB.Class({GetEnumerator$1:function(){return z.Get(p.map(function(bF){return bF.K;},this.d));},GetEnumerator:function(){return this.GetEnumerator$1();},GetEnumerator0:function(){return this.GetEnumerator$1();}},f,_8);_8.New=bB.Ctor(function(bF){f.New.call(this);this.d=bF;},_8);_9.get_UseAnimations=function(){return bj.UseAnimations();};_9.Play=function(bF){var bG;bG=null;return B.Delay(function(){return B.Bind(_9.Run(a.ignore,bj.Actions(bF)),function(){bj.Finalize(bF);return B.Return(null);});});};_9.Append=function(bF,bG){return{$:0,$0:bo.Append(bF.$0,bG.$0)};};_9.Run=function(bF,bG){var bH;function bI(bJ){function bK(bL,bM){var bN;bN=bM-bL;bG.Compute(bN);bF();return bN<=bH?void a.requestAnimationFrame(function(bO){bK(bL,bO);}):bJ();}a.requestAnimationFrame(function(bL){bK(bL,bL);});}bH=bG.Duration;return bH===0?B.Zero():B.FromContinuations(function(bJ,bK,bL){return bI.apply(null,[bJ,bK,bL]);});};_9.Concat=function(bF){return{$:0,$0:bo.Concat(p.map(bj.List,bF))};};_.BatchUpdatesEnabled=function(){bk.$cctor();return bk.BatchUpdatesEnabled;};ba.StartProcessor=function(bF){var bG;function bH(){var bI;bI=null;return B.Delay(function(){return B.Bind(bF,function(){var bJ;bJ=bG[0];return bJ===1?(bG[0]=0,B.Zero()):bJ===2?(bG[0]=1,bH()):B.Zero();});});}bG=[0];return function(){var bI;bI=bG[0];bI===0?(bG[0]=1,B.Start(bH(),null)):bI===1?bG[0]=2:void 0;};};bb=l.Updates=bB.Class({},null,bb);bb.Create=function(bF){var bG;bG=null;bG=bb.New(bF,null,function(){var bH;bH=bG.s;return bH===null?(bH=K.Copy(bG.c()),bG.s=bH,K.WhenObsoleteRun(bH,function(){bG.s=null;}),bH):bH;});return bG;};bb.New=function(bF,bG,bH){return new bb({c:bF,s:bG,v:bH});};bc.Updates=function(bF){return W.MapTreeReduce(function(bG){return bG.NChanged();},J.Const(),J.Map2Unit,bF.DynNodes);};bc.AppendTree=function(bF,bG){var bH;return bF===null?bG:bG===null?bF:(bH=new y({$:2,$0:bF,$1:bG}),(bc.SetFlags(bH,bc.Flags(bF)|bc.Flags(bG)),bH));};bc.EmptyAttr=function(){bm.$cctor();return bm.EmptyAttr;};bc.Insert=function(bF,bG){var bH,bI,bJ;function bK(bL){if(!(bL===null))if(bL!=null&&bL.$==1)bH.push(bL.$0);else if(bL!=null&&bL.$==2){bK(bL.$0);bK(bL.$1);}else if(bL!=null&&bL.$==3)bL.$0(bF);else if(bL!=null&&bL.$==4)bI.push(bL.$0);}bH=[];bI=[];bK(bG);bJ=bH.slice(0);return be.New(bF,bc.Flags(bG),bJ,bI.length===0?null:{$:1,$0:function(bL){p.iter(function(bM){bM(bL);},bI);}});};bc.SetFlags=function(bF,bG){bF.flags=bG;};bc.Flags=function(bF){return bF!==null&&bF.hasOwnProperty("flags")?bF.flags:0;};bc.HasExitAnim=function(bF){var bG;bG=2;return(bF.DynFlags&bG)===bG;};bc.GetExitAnim=function(bF){return bc.GetAnim(bF,function(bG,bH){return bG.NGetExitAnim(bH);});};bc.HasEnterAnim=function(bF){var bG;bG=1;return(bF.DynFlags&bG)===bG;};bc.GetEnterAnim=function(bF){return bc.GetAnim(bF,function(bG,bH){return bG.NGetEnterAnim(bH);});};bc.HasChangeAnim=function(bF){var bG;bG=4;return(bF.DynFlags&bG)===bG;};bc.GetChangeAnim=function(bF){return bc.GetAnim(bF,function(bG,bH){return bG.NGetChangeAnim(bH);});};bc.GetAnim=function(bF,bG){return _9.Concat(M.map(function(bH){return bG(bH,bF.DynElem);},bF.DynNodes));};bc.Sync=function(bF,bG){M.iter(function(bH){bH.NSync(bF);},bG.DynNodes);};be.New=function(bF,bG,bH,bI){var bJ;bJ={DynElem:bF,DynFlags:bG,DynNodes:bH};bB.SetOptional(bJ,"OnAfterRender",bI);return bJ;};bf=l.ConcreteVar=bB.Class({Get:function(){return this.current;},Set:function(bF){if(this.isConst)(function(bG){return bG("WebSharper.UI: invalid attempt to change value of a Var after calling SetFinal");}(function(bG){bC.log(bG);}));else{K.Obsolete(this.snap);this.current=bF;this.snap=K.New({$:2,$0:bF,$1:[]});}},get_View:function(){return this.view;}},x,bf);bf.New=bB.Ctor(function(bF,bG,bH){var bI;bI=this;x.New.call(this);this.isConst=bF;this.current=bH;this.snap=bG;this.view=function(){return bI.snap;};this.id=bl.Int();},bf);bh.New=function(bF,bG){return{PreviousNodes:bF,Top:bG};};bi.get_Empty=function(){return{$:0,$0:new R.New$3()};};bi.FindAll=function(bF){var bG;function bH(bJ){if(bJ!=null&&bJ.$==0){bH(bJ.$0);bH(bJ.$1);}else if(bJ!=null&&bJ.$==1)bI(bJ.$0);else if(bJ!=null&&bJ.$==2)bH(bJ.$0.Current);else if(bJ!=null&&bJ.$==6)M.iter(bI,bJ.$0.Holes);}function bI(bJ){bG.push(bJ);bH(bJ.Children);}bG=[];bH(bF);return{$:0,$0:new R.New$2(bG)};};bi.Filter=function(bF,bG){return{$:0,$0:br.Filter(bF,bG.$0)};};bi.Except=function(bF,bG){return{$:0,$0:br.Except(bF.$0,bG.$0)};};bi.ToArray=function(bF){return br.ToArray(bF.$0);};bi.Intersect=function(bF,bG){return{$:0,$0:br.Intersect(bF.$0,bG.$0)};};bj.UseAnimations=function(){bn.$cctor();return bn.UseAnimations;};bj.Actions=function(bF){return bj.ConcatActions(M.choose(function(bG){return bG.$==1?{$:1,$0:bG.$0}:null;},bo.ToArray(bF.$0)));};bj.Finalize=function(bF){M.iter(function(bG){if(bG.$==0)bG.$0();},bo.ToArray(bF.$0));};bj.ConcatActions=function(bF){var bG,bH,bI,bJ;bG=W.ofSeqNonCopying(bF);bH=M.length(bG);return bH===0?bj.Const():bH===1?M.get(bG,0):(bI=p.max(p.map(function(bK){return bK.Duration;},bG)),(bJ=M.map(function(bK){return bj.Prolong(bI,bK);},bG),bj.Def(bI,function(bK){M.iter(function(bL){bL.Compute(bK);},bJ);})));};bj.List=function(bF){return bF.$0;};bj.Const=function(bF){return bj.Def(0,function(){return bF;});};bj.Def=function(bF,bG){return{Compute:bG,Duration:bF};};bj.Prolong=function(bF,bG){var bH,bI,bJ;bH=bG.Compute;bI=bG.Duration;bJ=bv.Create(function(){return bG.Compute(bG.Duration);});return{Compute:function(bK){return bK>=bI?bJ.f():bH(bK);},Duration:bF};};bk.$cctor=function(){bk.$cctor=a.ignore;bk.BatchUpdatesEnabled=true;};bl.Int=function(){bl.set_counter(bl.counter()+1);return bl.counter();};bl.set_counter=function(bF){bs.$cctor();bs.counter=bF;};bl.counter=function(){bs.$cctor();return bs.counter;};bm.$cctor=function(){bm.$cctor=a.ignore;bm.EmptyAttr=null;};bn.$cctor=function(){bn.$cctor=a.ignore;bn.CubicInOut=bq.Custom(function(bF){var bG;bG=bF*bF;return 3*bG-2*(bG*bF);});bn.UseAnimations=true;};bo.Append=function(bF,bG){return bF.$==0?bG:bG.$==0?bF:{$:2,$0:bF,$1:bG};};bo.ToArray=function(bF){var bG;function bH(bI){if(bI.$==1)bG.push(bI.$0);else if(bI.$==2){bH(bI.$0);bH(bI.$1);}else if(bI.$==3)M.iter(function(bJ){bG.push(bJ);},bI.$0);}bG=[];bH(bF);return bG.slice(0);};bo.Concat=function(bF){var bG;bG=W.ofSeqNonCopying(bF);return W.TreeReduce(bo.Empty(),bo.Append,bG);};bo.Empty=function(){bw.$cctor();return bw.Empty;};bp.concat=function(bF){var bG,bH;bG=[];for(var bI in bF)bG.push.apply(bG,bF[bI]);return bG;};bq=l.Easing=bB.Class({},f,bq);bq.Custom=function(bF){return new bq.New(bF);};bq.New=bB.Ctor(function(bF){f.New.call(this);this.transformTime=bF;},bq);br.Filter=function(bF,bG){return new R.New$2(M.filter(bF,br.ToArray(bG)));};br.Except=function(bF,bG){var bH;bH=new R.New$2(br.ToArray(bG));bH.ExceptWith(br.ToArray(bF));return bH;};br.ToArray=function(bF){var bG;bG=M.create(bF.get_Count(),void 0);bF.CopyTo(bG);return bG;};br.Intersect=function(bF,bG){var bH;bH=new R.New$2(br.ToArray(bF));bH.IntersectWith(br.ToArray(bG));return bH;};bs.$cctor=function(){bs.$cctor=a.ignore;bs.counter=0;};bt.Clear=function(bF){bF.splice(0,M.length(bF));};bu.Children=function(bF,bG){var bH,bI,bJ;if(bG!=null&&bG.$==1){bJ=[];bH=bG.$0[0].nextSibling;while(bH!==bG.$0[1]){bJ.push(bH);bH=bH.nextSibling;}return{$:0,$0:bJ};}else return{$:0,$0:M.init(bF.childNodes.length,(bI=bF.childNodes,function(bK){return bI[bK];}))};};bu.Except=function(bF,bG){var bH;bH=bF.$0;return{$:0,$0:M.filter(function(bI){return M.forall(function(bJ){return!(bI===bJ);},bH);},bG.$0)};};bu.Iter=function(bF,bG){M.iter(bF,bG.$0);};bu.DocChildren=function(bF){var bG;function bH(bI){if(bI!=null&&bI.$==2)bH(bI.$0.Current);else if(bI!=null&&bI.$==1)bG.push(bI.$0.El);else if(bI==null);else if(bI!=null&&bI.$==5)bG.push(bI.$0);else if(bI!=null&&bI.$==4)bG.push(bI.$0.Text);else if(bI!=null&&bI.$==6)M.iter(function(bJ){if(bJ==null||bJ.constructor===X)bH(bJ);else bG.push(bJ);},bI.$0.Els);else{bH(bI.$0);bH(bI.$1);}}bG=[];bH(bF.Children);return{$:0,$0:W.ofSeqNonCopying(bG)};};bv.Create=function(bF){return by.New(false,bF,bv.forceLazy);};bv.forceLazy=function(){var bF;bF=this.v();this.c=true;this.v=bF;this.f=bv.cachedLazy;return bF;};bv.cachedLazy=function(){return this.v;};bw.$cctor=function(){bw.$cctor=a.ignore;bw.Empty={$:0};};by.New=function(bF,bG,bH){return{c:bF,v:bG,f:bH};};bB.OnLoad(function(){c.main();});}());


if (typeof IntelliFactory !=='undefined') {
  IntelliFactory.Runtime.ScriptBasePath = '/Content/';
  IntelliFactory.Runtime.Start();
}
